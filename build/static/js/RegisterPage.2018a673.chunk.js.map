{"version":3,"file":"static/js/RegisterPage.2018a673.chunk.js","mappings":"4QACA,EAAwB,4BAAxB,EAA8D,8BAA9D,EAAoG,4BAApG,EAAwI,4BAAxI,EAAmL,mC,8ECgB7KA,EAAe,CACnBC,KAAM,GACNC,MAAO,GACPC,SAAU,IAENC,EAAkB,WAAmC,IAAlCC,EAAiC,uDAAzBL,EAAcM,EAAW,uCACxD,OAAQA,EAAOC,MACb,IAAK,OACH,OAAO,kBAAKF,GAAZ,IAAmBJ,KAAMK,EAAOE,UAClC,IAAK,QACH,OAAO,kBAAKH,GAAZ,IAAmBH,MAAOI,EAAOE,UACnC,IAAK,WACH,OAAO,kBAAKH,GAAZ,IAAmBF,SAAUG,EAAOE,UACtC,IAAK,QACH,OAAOR,EACT,QACE,OAAOK,IA8Fb,EA1FqB,WACnB,OAA0BI,EAAAA,EAAAA,YAAWL,EAAiBJ,GAAtD,eAAOK,EAAP,KAAcK,EAAd,KACMC,EAAcC,IAAAA,WACdC,EAAeD,IAAAA,WACfE,EAAkBF,IAAAA,WAExB,IADiBG,EAAAA,EAAAA,OACCC,EAAAA,EAAAA,OAAXC,GAAP,eAEMC,GAAgBC,EAAAA,EAAAA,MAGhBC,EAAe,SAAAC,GACnB,MAAwBA,EAAMC,OAAtBrB,EAAR,EAAQA,KAAMsB,EAAd,EAAcA,MACdb,EAAS,CAAEH,KAAMN,EAAMO,QAASe,KAI5BC,EAAY,mCAAG,WAAMC,GAAN,kFACnBA,EAAEC,iBADiB,kBAGET,EAAQZ,GAAOsB,SAHjB,OAGXC,EAHW,OAITC,EAAgBD,EAAhBC,MAAOC,EAASF,EAATE,KACfZ,GAAca,EAAAA,EAAAA,IAAcF,IAC5BX,GAAcc,EAAAA,EAAAA,OACdd,GAAce,EAAAA,EAAAA,IAAaH,IAC3BpB,EAAS,CAAEH,KAAM,UARA,kDAWjB2B,QAAQC,IAAR,MACAC,EAAAA,GAAAA,MAAA,qBAZiB,0DAAH,sDAgBlB,OACE,iCACE,eAAIC,UAAWC,EAAf,uBACA,kBAAMC,SAAUf,EAAca,UAAWC,EAAzC,WACE,kBAAOE,QAAS7B,EAAa0B,UAAWC,EAAxC,mBAGA,kBACE/B,KAAK,OACLN,KAAK,OACLwC,QAAQ,yHACRC,MAAM,yIACNC,UAAQ,EACRpB,MAAOlB,EAAMJ,KACb2C,SAAUxB,EACVyB,GAAIlC,EACJ0B,UAAWC,KAGb,kBAAOE,QAAS3B,EAAcwB,UAAWC,EAAzC,oBAGA,kBACE/B,KAAK,QACLN,KAAK,QACLwC,QAAQ,gLACRC,MAAM,+FACNC,UAAQ,EACRpB,MAAOlB,EAAMH,MACb0C,SAAUxB,EACVyB,GAAIhC,EACJwB,UAAWC,KAEb,kBAAOE,QAAS1B,EAAiBuB,UAAWC,EAA5C,uBAGA,kBACE/B,KAAK,OACLN,KAAK,WAGL0C,UAAQ,EACRpB,MAAOlB,EAAMF,SACbyC,SAAUxB,EACVyB,GAAI/B,EACJuB,UAAWC,KAEb,gBAAKD,UAAWC,EAAhB,UACE,SAACQ,EAAA,EAAD,CAAQJ,MAAM,WAAWnC,KAAK,iBAIlC,SAAC,KAAD,CAAgBwC,UAAW,UChHjC,EARqB,WACnB,OACE,+BACE,SAAC,EAAD","sources":["webpack://goit-react-hw-08-phonebook/./src/components/RegisterForm/RegisterForm.module.css?a5d4","components/RegisterForm/RegisterForm.jsx","pages/RegisterPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"title\":\"RegisterForm_title__hVU3x\",\"wrapper\":\"RegisterForm_wrapper__V0tzd\",\"label\":\"RegisterForm_label__EZZ8Y\",\"input\":\"RegisterForm_input__-vNEl\",\"btn__wrapper\":\"RegisterForm_btn__wrapper__lpQTY\"};","import React, { useReducer } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport s from './RegisterForm.module.css';\r\nimport shortid from 'shortid';\r\nimport { useAddUserMutation } from 'redux/auth/authApi';\r\nimport {\r\n  myActionToken,\r\n  myActionUser,\r\n  loggedOn,\r\n} from 'redux/auth/token-reduser';\r\nimport { getIsLogged, getToken } from 'redux/auth/token-selectors';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { toast } from 'react-toastify';\r\nimport Button from 'components/Button/Button';\r\n\r\nconst initialState = {\r\n  name: '',\r\n  email: '',\r\n  password: '',\r\n};\r\nconst registerReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'name':\r\n      return { ...state, name: action.payload };\r\n    case 'email':\r\n      return { ...state, email: action.payload };\r\n    case 'password':\r\n      return { ...state, password: action.payload };\r\n    case 'reset':\r\n      return initialState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst RegisterForm = () => {\r\n  const [state, dispatch] = useReducer(registerReducer, initialState);\r\n  const nameInputId = shortid.generate();\r\n  const emailInputId = shortid.generate();\r\n  const passwordInputId = shortid.generate();\r\n  const navigate = useNavigate();\r\n  const [addUser] = useAddUserMutation();\r\n\r\n  const dispatchToken = useDispatch();\r\n\r\n  // записує в локальний стейт и`мя, пошту та пароль\r\n  const handleChange = event => {\r\n    const { name, value } = event.target;\r\n    dispatch({ type: name, payload: value });\r\n  };\r\n\r\n  // при натискання на кнопку локальний стейт передається як аргумент до функції addUser, форма очищується, токен записується в стейт\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    try {\r\n      const data = await addUser(state).unwrap();\r\n      const { token, user } = data;\r\n      dispatchToken(myActionToken(token));\r\n      dispatchToken(loggedOn());\r\n      dispatchToken(myActionUser(user));\r\n      dispatch({ type: 'reset' });\r\n      // navigate('/phonebook');\r\n    } catch (error) {\r\n      console.log(error);\r\n      toast.error(`Somthing wrong...`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <h1 className={s.title}>Register</h1>\r\n      <form onSubmit={handleSubmit} className={s.wrapper}>\r\n        <label htmlFor={nameInputId} className={s.label}>\r\n          Name\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          pattern=\"^[a-zA-Zа-яА-Я]+(([' -][a-zA-Zа-яА-Я ])?[a-zA-Zа-яА-Я]*)*$\"\r\n          title=\"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan\"\r\n          required\r\n          value={state.name}\r\n          onChange={handleChange}\r\n          id={nameInputId}\r\n          className={s.input}\r\n        />\r\n\r\n        <label htmlFor={emailInputId} className={s.label}>\r\n          Email\r\n        </label>\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          pattern=\"([A-zА-я])+([0-9\\-_\\+\\.])*([A-zА-я0-9\\-_\\+\\.])*@([A-zА-я])+([0-9\\-_\\+\\.])*([A-zА-я0-9\\-_\\+\\.])*[\\.]([A-zА-я])+\"\r\n          title=\"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +\"\r\n          required\r\n          value={state.email}\r\n          onChange={handleChange}\r\n          id={emailInputId}\r\n          className={s.input}\r\n        />\r\n        <label htmlFor={passwordInputId} className={s.label}>\r\n          Password\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"password\"\r\n          // pattern=\"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}\"\r\n          // title=\"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +\"\r\n          required\r\n          value={state.password}\r\n          onChange={handleChange}\r\n          id={passwordInputId}\r\n          className={s.input}\r\n        />\r\n        <div className={s.btn__wrapper}>\r\n          <Button title=\"Register\" type=\"submit\" />\r\n        </div>\r\n      </form>\r\n\r\n      <ToastContainer autoClose={2000} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterForm;\r\n","import RegisterForm from 'components/RegisterForm/RegisterForm';\r\n\r\nconst RegisterPage = () => {\r\n  return (\r\n    <>\r\n      <RegisterForm />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default RegisterPage;\r\n"],"names":["initialState","name","email","password","registerReducer","state","action","type","payload","useReducer","dispatch","nameInputId","shortid","emailInputId","passwordInputId","useNavigate","useAddUserMutation","addUser","dispatchToken","useDispatch","handleChange","event","target","value","handleSubmit","e","preventDefault","unwrap","data","token","user","myActionToken","loggedOn","myActionUser","console","log","toast","className","s","onSubmit","htmlFor","pattern","title","required","onChange","id","Button","autoClose"],"sourceRoot":""}